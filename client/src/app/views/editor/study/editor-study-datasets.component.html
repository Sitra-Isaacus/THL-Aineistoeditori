<ng-container *ngIf="study">
  <study-sidebar [study]="study"
                [activeSection]="sidebarActiveSection">
  </study-sidebar>

  <div class="content-container">
    <div class="content-header container-fluid">
      <div class="row">
        <div class="col-xs-12">
          <h1>{{study.prefLabel | lang}}</h1>
        </div>
      </div>
    </div>
    
    <div class="content-body container-fluid">
      <div class="row">
        <div class="col-xs-12">
          <h2>{{'study.manageDatasets' | translate}}</h2>
        </div>
        <div class="col-xs-12">
          <div *ngIf="(organizations && organizations.length) || user.isAdmin" class="row">
            <div class="col-xs-12">
              <h2 class="pull-right">
                <button routerLink="/editor/studies/{{study.id}}/datasets/new"
                        class="btn btn-default pull-right">
                  <span class="glyphicon glyphicon-plus"></span>
                  {{ 'addDataset' | translate }}
                </button>
              </h2>
            </div>
          </div>
          <ng-container *ngIf="study.datasets && study.datasets.length; else noStudyDatasets">
            <table class="table table-striped">
              <tr>
                <th>{{'prefLabel' | translate}}</th>
                <th>{{'description' | translate}}</th>
              </tr>
              <tr *ngFor="let dataset of study.datasets"
                  routerLink="/editor/studies/{{ study.id }}/datasets/{{ dataset.id }}"
                  style="cursor: pointer;">
                  <td>
                    {{ dataset.prefLabel | lang}}
                  </td>
                  <td>
                    {{ dataset.description | lang }}
                  </td>
              </tr>
            </table>
          </ng-container>
          <ng-template #noStudyDatasets>
            {{'study.noDatasets' | translate}}
          </ng-template>
        </div>
      </div>
    </div>

  </div>
</ng-container>

<ng-container *ngIf="loadingStudy">
  <thl-spinner></thl-spinner>
</ng-container>



