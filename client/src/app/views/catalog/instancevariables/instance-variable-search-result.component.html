<div class="search-result">
    <div class="row">
        <div *ngIf="instanceVariable.prefLabel" class="col-xs-9 instance-variable-header">
            <ng-container *ngIf="instanceVariable.dataset && instanceVariable.dataset.study">
                <a routerLink="/catalog/studies/{{ instanceVariable.dataset.study.id }}/datasets/{{ instanceVariable.dataset.id }}/instanceVariables/{{instanceVariable.id}}">{{instanceVariable.prefLabel | lang}}</a>
            </ng-container>
            <ng-container *ngIf="!instanceVariable.dataset">
                {{instanceVariable.prefLabel | lang}}
            </ng-container>
        </div>

        <div class="col-xs-3" [ngClass]="{'variable-label':instanceVariable.variable, 'variable-label-inactive':!instanceVariable.variable }">
            <ng-container *ngIf="instanceVariable.variable">
                <a routerLink="/catalog/variables/{{instanceVariable.variable.id}}">{{instanceVariable.variable.prefLabel | lang }}</a>
            </ng-container>
            <ng-container *ngIf="!instanceVariable.variable">
                {{'catalog.searchInstanceVariable.noVariable' | translate }}
            </ng-container>
        </div>

    </div>
    <div class="row">
        <div class="col-xs-9">{{instanceVariable.description | lang }}</div>
    </div>
    <div class="row">
        <div class="col-xs-9 dataset-label">{{'catalog.searchInstanceVariable.foundInDataset' | translate}}:
            <ng-container *ngIf="instanceVariable.dataset && instanceVariable.dataset.study">
                <a routerLink="/catalog/studies/{{ instanceVariable.dataset.study.id }}/datasets/{{ instanceVariable.dataset.id }}">{{instanceVariable.dataset.prefLabel | lang }}</a>
            </ng-container>
            <ng-container *ngIf="!instanceVariable.dataset">
                {{'catalog.searchInstanceVariable.noAssociatedDataset' | translate }}
            </ng-container>
        </div>
        <div class="col-xs-3 reference-period-range">
                {{'referencePeriod' | translate}}:<br/>

                <ng-container *ngIf="(instanceVariable.referencePeriodStart || instanceVariable.referencePeriodEnd); else inheritedDatasetReferencePeriod">
                    {{ instanceVariable.referencePeriodStart | date:'dd.MM.yyyy' }}
                    —
                    {{ instanceVariable.referencePeriodEnd | date:'dd.MM.yyyy' }}
                </ng-container>

                <ng-template #inheritedDatasetReferencePeriod>
                    <ng-container *ngIf="(instanceVariable.dataset && (instanceVariable.dataset.referencePeriodStart || instanceVariable.dataset.referencePeriodEnd)); else inheritedStudyReferencePeriod">
                        {{ instanceVariable.dataset.referencePeriodStart | date:'dd.MM.yyyy' }}
                        —
                        {{ instanceVariable.dataset.referencePeriodEnd | date:'dd.MM.yyyy' }}
                    </ng-container>
                </ng-template>

                <ng-template #inheritedStudyReferencePeriod>
                    <ng-container *ngIf="(instanceVariable.dataset.study && (instanceVariable.dataset.study.referencePeriodStart || instanceVariable.dataset.study.referencePeriodEnd)); else noReferencePeriod">
                        {{ instanceVariable.dataset.study.referencePeriodStart | date:'dd.MM.yyyy' }}
                        —
                        {{ instanceVariable.dataset.study.referencePeriodEnd | date:'dd.MM.yyyy' }}
                    </ng-container>
                </ng-template>


                <ng-template #noReferencePeriod>
                    {{'catalog.searchInstanceVariable.noReferencePeriod' | translate}}
                </ng-template>
        </div>
    </div>
</div>
