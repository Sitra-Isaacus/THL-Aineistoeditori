<ng-container *ngIf="instanceVariable; else loadingInstanceVariable;">

  <div class="row">
    <div class="col-xs-12">
      <h1>{{ instanceVariable.prefLabel | lang }}</h1>
    </div>
  </div>

  <div class="row dataset-reference">
    <div class="col-xs-12">
      <p>
        <a routerLink="/catalog/datasets/{{ datasetId }}">
          {{ 'dataset' | translate }}:
          {{ dataset.prefLabel | lang }}
        </a>
      </p>
    </div>
  </div>

  <div *ngIf="instanceVariable.description | lang"
       class="row description">
    <div class="col-xs-12">
      <p class="preserve-line-breaks">{{ instanceVariable.description | lang }}</p>
    </div>
  </div>

  <div *ngIf="(instanceVariable.conceptsFromScheme.length || (instanceVariable.freeConcepts | lang))"
    class="row">
    <div class="col-xs-12">
      <h2>{{ 'conceptsFromScheme' | translate }}</h2>
      <p>
        <span *ngFor="let concept of instanceVariable.conceptsFromScheme">
          <span pTooltip="{{ 'source' | translate }}: {{ concept.conceptScheme.prefLabel | lang }}"
                tooltipPosition="bottom"
                style="margin-right:1em;white-space:nowrap;">
            {{ concept.prefLabel | lang }}
          </span>
        </span>
        <ng-container *ngIf="instanceVariable.freeConcepts && instanceVariable.freeConcepts[language]">
          <span *ngFor="let concept of instanceVariable.freeConcepts[language].split(';')">
            <span style="margin-right:1em;white-space:nowrap;">
              {{ concept }}
            </span>
          </span>
        </ng-container>
      </p>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <h2>{{ 'catalog.referencePeriod' | translate }}</h2>
      <ng-container *ngIf="(instanceVariable.referencePeriodStart || instanceVariable.referencePeriodEnd); else inheritedReferencePeriod;">
        <p>
          {{ instanceVariable.referencePeriodStart | date:'dd.MM.yyyy' }}
          —
          {{ instanceVariable.referencePeriodEnd | date:'dd.MM.yyyy' }}
          <span style="margin-left:2em;">
            <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
            <span *ngIf="(dataset.referencePeriodStart || dataset.referencePeriodEnd)">
              {{ 'valueInDataset' | translate }}:
              {{ dataset.referencePeriodStart | date:'dd.MM.yyyy' }}
              —
              {{ dataset.referencePeriodEnd | date:'dd.MM.yyyy' }}
            </span>
          </span>
        </p>
      </ng-container>
      <ng-template #inheritedReferencePeriod>
        <p *ngIf="(dataset.referencePeriodStart || dataset.referencePeriodEnd); else noReferencePeriod;">
          {{ dataset.referencePeriodStart }}
          —
          {{ dataset.referencePeriodEnd }}
        </p>
      </ng-template>
      <ng-template #noReferencePeriod>
        <p>{{ 'noReferencePeriod' | translate }}</p>
      </ng-template>
    </div>
  </div>

  <div *ngIf="instanceVariable.valueDomainType"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'valueDomain' | translate }}</h2>
      <p>{{ 'valueDomainType.' + instanceVariable.valueDomainType | translate }}</p>
    </div>
  </div>

  <div class="row" *ngIf="instanceVariable.unit">
    <div class="col-xs-12">
      <h2>{{ 'unit' | translate }}</h2>
      <p>
        {{ instanceVariable.unit.prefLabel | lang }}
        <span *ngIf="instanceVariable.unit.symbol | lang">
          ({{ instanceVariable.unit.symbol | lang }})
        </span>
      </p>
    </div>
  </div>

  <div *ngIf="instanceVariable.technicalName"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'technicalName' | translate }}</h2>
      <p>{{ instanceVariable.technicalName }}</p>
    </div>
  </div>

  <div *ngIf="instanceVariable.valueRangeMin"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'valueRangeMin' | translate }}</h2>
      <p>{{ instanceVariable.valueRangeMin }}</p>
    </div>
  </div>

  <div *ngIf="instanceVariable.valueRangeMax"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'valueRangeMax' | translate }}</h2>
      <p>{{ instanceVariable.valueRangeMax }}</p>
    </div>
  </div>

  <div *ngIf="instanceVariable.missingValues && instanceVariable.missingValues[language]"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'missingValues' | translate }}</h2>
      <p>{{ instanceVariable.missingValues | lang }}</p>
    </div>
  </div>

  <div *ngIf="instanceVariable.defaultMissingValue"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'defaultMissingValue' | translate }}</h2>
      <p>{{ instanceVariable.defaultMissingValue }}</p>
    </div>
  </div>

  <div *ngIf="instanceVariable.qualityStatement && instanceVariable.qualityStatement[language]"
       class="row" >
    <div class="col-xs-12">
      <h2>{{ 'qualityStatement' | translate }}</h2>
      <p>{{ instanceVariable.qualityStatement | lang }}</p>
    </div>
  </div>

</ng-container>

<ng-template #loadingInstanceVariable>
  <thl-spinner></thl-spinner>
</ng-template>

<div class="row">
  <div class="col-xs-12">
    <hr>
  </div>
</div>

<div class="row">
  <div class="col-xs-12">
    <button routerLink="/catalog/datasets/{{ datasetId }}" class="btn btn-default">
      <span class="glyphicon glyphicon-chevron-left"></span>
      {{ 'back' | translate }}
    </button>
  </div>
</div>
